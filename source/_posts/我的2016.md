---
title: 我的2016
date: 2016-12-29 21:11:12
tags: 记录
---
{% asset_img 2016.jpg %}
　　离开深圳, 下了好大的勇气, 为了爱情来到了青岛, 进入了一家外包公司, 现状简直是..., 奔着自己对前端的热爱必须改变这样的状态

## 单枪匹马
　　刚到公司发现青岛公司前端在这边就我一个人, 恩, 一个人, 说好的基友呢? 行, 这些都无所谓了, 为了幸福....
　　接触公司的第一个项目是海尔的互联互通项目, 项目架构是: Coffee + Jquery + handlebarsjs + [linner(项目构建工具)](https://github.com/SaitoWu/linner), 后端基本也是实现了一套handlebar的语法解析引擎和 springBoot, 前端开发必须依赖后端, 后端也必须起前端, 好蛋疼啊!有木有, 恩! 一早上基本就是在起后端的服务去了, 下午才能真正干活!
对于公司前端的整套开发架构基本一天就摸熟了, coffee 的语法还是感觉蛮不错的(可是我后面换成了es6, 吼吼...), 公司前端框架思路是: 业务分模块, 不按照页面上的组件去分, 加载页面扫描到注册在 div 节点上的类名, 然后根据类名去实例化这个类,完成对该模块的函数注册以及插件初始化, 初期 linner 会把项目里面的 coffee 文件打包到 app.js 同时每个形成独立的模块暴露出来供全局使用, 恩! 项目简单那还行, 如果功能模块多了以后, 但是海尔的需求简直是剪不断理还乱, 后期整个项目开发出了100多个功能出来, 还在增加中, 所以每次加载其实把不必要的文件全部加载进来. 一个 app.js 达到了3M, 用户加载超过了7秒.....

　　公司这边严重缺人, 咋办! 身为前端的我, 经历了和海尔的领导谈需求, 谈业务, 出原型, 出UI, 继续沟通, 继续改,确认需求和原型,最终开发, 唯一欣慰的是不用我写后端, 小微创客是我为公司做的第二个项目, 由于我们有了前端, 所以把之前在深圳开发的流程搬过来了, 基本一个月解决了这个项目(这边项目基本要半年以上才能算完), 小微项目的顺利结束, 得到了公司对我的认可, 但是我已经蓄谋已久, 想替换掉公司现有的前端开发架构.....

 ## 创建第一个小团队
  　　公司领导还是挺好的(呵呵呵), 招了第二个前端, 这个小伙伴是我面试的, 他在学习能力这方面还是挺强的, 但是基本没有开发过什么项目, 面试过程我刚好在做一个类目的功能, 就简单问了一下他, 事件代理的好处和缺点, 如果他来做他会怎么做,回答不是很好, 但是还是让他第二天就来上班了
　　现阶段来说虽然只有两个人,但是前端这些体系还是要搞起来的, 因为现在的开发效率实在是太低太低,而且海尔的项目基本是企业管理系统, 做成单页是个好的选择, 目前都是用的公司做电商的那套体系, 现在工作压力稍微没有那么重了, 所以我花费时间去调研在海尔实行单页开发是否可行.
   * 海尔必须兼容 IE8
   * 要求首屏时间不能超过3s, 项目基本都是内网
   * 用户体验必须好, 表单数据存储

　　之前公司的开发框架是 Angular1.X grunt sass requireJS, 但是 ng1.3就抛弃了对 IE8 的支持, 所以必须在 ng1.2下开发但是这个版本官网说法是不会继续花费很多人力去维护和修改,所以意味着如果遇到问题会比较困难, 而且后期项目的复杂度会很大数据之间关系也非常复杂, ng的 dirty check会导致刷新缓慢,相比 react 这个ui库来说还是太重而且捆绑太多的东西可定制的东西还是太少, 而且 redux 对于数据的管理就是我想要的, 最终决定使用了 react+react-router+redux+webpack 搭建前端开发体系
　　确定前端框架体系后就是具体的实行了, 之前对 webpack 这个模块打包工具不是非常熟悉, 但是对于代码分割, 按需加载还是非常不错的，webpack是一种解决方案，gulp和grunt 是一种工具,优化前端的工作流程, 这是我对这些前端工具的理解
自己花了大概一个星期左右完成了第一版的前端框架,[Webpack+dashboard+React 集成环境框架](https://github.com/zmGitHub/webpack-startkit), 刚好公司开始新的项目,对浏览器的要求也不是非常的高, 所以借此运用下这套前端体系

## 团队管理
　　经过几个月的招聘我现有的前端团队已经有五个人了,两个实习生剩下基本都是做过一年的, 目前前端这些代码的review, 团队培训, 任务安排和公共组件的开发任务基本都落到我这边过来, 所以我的管理方式基本都是:
  * 早上过来开早会,基本就是10分钟的样子, 和大家确认要做的事情
  * 其他时间基本是在解决新手遇到的问题, 然后进行技术指导
  * 下班后大家会主动过来开会, 把一天遇到的问题提出来大家讨论和分享解决方案,还有就是安排任务
  * 每周由团队成员轮流分享技术
　　这样的管理方式持续了大概3个月左右, 团队成员基本能上手写项目, 但是这边人员紧项目多又急, 基本一个月同时上线两三个项目,所以前期实习生也参加了项目开发, 对于他们基本是给些简单的任务, 如果做的快而且代码质量过关就让他们挑战单个业务模块,前期对于他们的代码规范都是用 eslint 去做的, 所以他们在后期写代码都能很规范同时也剩去我很多代码排查的时间

## 开发体系升级
　　到目前我们开发的项目已经10个左右了上线运营的9个, 这些项目基本都是前后端分离的, 但是我们前端团队和后端是分开的他们大部分时间都是在海尔那边, 所以对于我们沟通上又增加不少的成本, 对于这样的局面基本都是我们前端先把静态页面做好了,然后确定字段, API 都是前端写好, 所以在后台没有接口之前我们必须将每个模块的业务逻辑给串联起来, 等后台把接口开发完成后我们前端去掉 mock 就可以正式上线, 整个部署流程也是运用命令去完成的, 前端开发完测试过后, 代码提交到公司的 gitlab 仓库, 我单独搞了个简单前端部署流程:
* 代码提交合并到 master, 手动构建 master 上代码
* 在服务器上执行 docker 镜像文件, 查看构建日志
* 构建后执行部署任务, 由Nginx 处理静态文件和API接口的转发
每次的构建都能看到执行的细节, 下面是一份简单的构建代码:
```bash
FROM daocloud.io/terminus/node-yarn:6.9

WORKDIR /src
COPY ./package.json /src/package.json
RUN npm install

COPY . /src
RUN npm run build

EXPOSE 7299
CMD node server.js

```
　　这样的体系不能说很完善或者说很优秀, 至少在我们的团队中还是起了很大的作用, 至少在这10个项目中我们没有延期, 对于构建这块还是花了蛮多功夫的, webpack 到后期编译速度和打包速度还是太慢, 尝试过 happypack(也就快了那么7秒), dll(呃!还不如不用)等,当然我们也把代码分割和按需加载整到了项目的开发中, 在客户使用中还是得到了很好的反馈比之前给到回复都是说我们很专业!

## 总结
　　其实感觉我们欠缺的东西还是挺多的, 比如单元测试这些都没有仔细的去用过, 一个是工期实在是太赶, 还有就是改动的比较频繁, 团队成员的发展比较单一研究的技术还是太少, 过早让实习生接手整个项目
　　不过今年是我收获最多的一年, 培养了五个前端都能独挡一面还是很欣慰的, 自己的技术也提高了不少, 最重要是能和别人分享技术感到非常的愉快, 2017年我们还有很多的事情去做:
* 构建流程可视化和更高的可配性
* 自动测试框架搭建
* 界面生成工具(因为我们项目中很多都是表格这类的, 这部分做成工具来处理)
* 团队成员技术再提升一个层次

>新的一年, 给自己留下更多期待和挑战!
